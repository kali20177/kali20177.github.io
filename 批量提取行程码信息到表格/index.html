<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>æ‰¹é‡æå–è¡Œç¨‹ç /å¥åº·ç ä¿¡æ¯åˆ°è¡¨æ ¼ - mufasa ä¸ªäººç«™</title><meta name="Description" content="mufasa ä¸ªäººç«™"><meta property="og:title" content="æ‰¹é‡æå–è¡Œç¨‹ç /å¥åº·ç ä¿¡æ¯åˆ°è¡¨æ ¼" />
<meta property="og:description" content="1. è¯´æ˜ å­¦æ ¡è€å¸ˆå¸Œæœ›èƒ½å®ç°ä¸€ä¸ªè‡ªåŠ¨å¤„ç†è¡Œç¨‹ç ã€å¥åº·ç ä¿¡æ¯çš„ç¨‹åºï¼Œæœ¬æ–‡è®°å½•ä¸€ä¸‹å®ç°è¿‡ç¨‹ã€‚ç¬”è€…éè®¡ç®—æœºä¸“ä¸šäººå‘˜ï¼Œä»£ç çœ‹çœ‹å°±å¥½å“ˆ ğŸ˜¥ã€‚ 2. å®ç°æ€è·¯ ç¨‹åºæ‰§" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://kali20177.github.io/%E6%89%B9%E9%87%8F%E6%8F%90%E5%8F%96%E8%A1%8C%E7%A8%8B%E7%A0%81%E4%BF%A1%E6%81%AF%E5%88%B0%E8%A1%A8%E6%A0%BC/" /><meta property="og:image" content="https://kali20177.github.io/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2022-04-13T17:45:59+08:00" />
<meta property="article:modified_time" content="2022-04-13T17:45:59+08:00" /><meta property="og:site_name" content="My cool site" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://kali20177.github.io/logo.png"/>

<meta name="twitter:title" content="æ‰¹é‡æå–è¡Œç¨‹ç /å¥åº·ç ä¿¡æ¯åˆ°è¡¨æ ¼"/>
<meta name="twitter:description" content="1. è¯´æ˜ å­¦æ ¡è€å¸ˆå¸Œæœ›èƒ½å®ç°ä¸€ä¸ªè‡ªåŠ¨å¤„ç†è¡Œç¨‹ç ã€å¥åº·ç ä¿¡æ¯çš„ç¨‹åºï¼Œæœ¬æ–‡è®°å½•ä¸€ä¸‹å®ç°è¿‡ç¨‹ã€‚ç¬”è€…éè®¡ç®—æœºä¸“ä¸šäººå‘˜ï¼Œä»£ç çœ‹çœ‹å°±å¥½å“ˆ ğŸ˜¥ã€‚ 2. å®ç°æ€è·¯ ç¨‹åºæ‰§"/>
<meta name="application-name" content="LoveIt">
<meta name="apple-mobile-web-app-title" content="LoveIt"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://kali20177.github.io/%E6%89%B9%E9%87%8F%E6%8F%90%E5%8F%96%E8%A1%8C%E7%A8%8B%E7%A0%81%E4%BF%A1%E6%81%AF%E5%88%B0%E8%A1%A8%E6%A0%BC/" /><link rel="prev" href="https://kali20177.github.io/matplotlib-cpp-c-%E4%B8%AD%E4%BD%BF%E7%94%A8-python-%E7%BB%98%E5%9B%BE%E6%A8%A1%E5%9D%97%E7%9A%84%E6%96%B9%E6%B3%95/" /><link rel="next" href="https://kali20177.github.io/r-%E8%AF%AD%E8%A8%80%E7%BB%98%E5%9B%BE/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "æ‰¹é‡æå–è¡Œç¨‹ç /å¥åº·ç ä¿¡æ¯åˆ°è¡¨æ ¼",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/kali20177.github.io\/%E6%89%B9%E9%87%8F%E6%8F%90%E5%8F%96%E8%A1%8C%E7%A8%8B%E7%A0%81%E4%BF%A1%E6%81%AF%E5%88%B0%E8%A1%A8%E6%A0%BC\/"
        },"genre": "posts","keywords": "python, é¡¹ç›®","wordcount":  1265 ,
        "url": "https:\/\/kali20177.github.io\/%E6%89%B9%E9%87%8F%E6%8F%90%E5%8F%96%E8%A1%8C%E7%A8%8B%E7%A0%81%E4%BF%A1%E6%81%AF%E5%88%B0%E8%A1%A8%E6%A0%BC\/","datePublished": "2022-04-13T17:45:59+08:00","dateModified": "2022-04-13T17:45:59+08:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "mufasa"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="mufasa ä¸ªäººç«™">Mufasa&#39;s blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> æ–‡ç«  </a><a class="menu-item" href="/tags/"> æ ‡ç­¾ </a><a class="menu-item" href="/categories/"> åˆ†ç±» </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="æœç´¢">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="mufasa ä¸ªäººç«™">Mufasa&#39;s blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="æœç´¢æ–‡ç« æ ‡é¢˜æˆ–å†…å®¹..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="æœç´¢">
                            <i class="fas fa-search fa-fw" aria-hidden="true"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="æ¸…ç©º">
                            <i class="fas fa-times-circle fa-fw" aria-hidden="true"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin" aria-hidden="true"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        å–æ¶ˆ
                    </a>
                </div><a class="menu-item" href="/posts/" title="">æ–‡ç« </a><a class="menu-item" href="/tags/" title="">æ ‡ç­¾</a><a class="menu-item" href="/categories/" title="">åˆ†ç±»</a><a href="javascript:void(0);" class="menu-item theme-switch" title="åˆ‡æ¢ä¸»é¢˜">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><div class="search-dropdown desktop">
        <div id="search-dropdown-desktop"></div>
    </div>
    <div class="search-dropdown mobile">
        <div id="search-dropdown-mobile"></div>
    </div><main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">ç›®å½•</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">æ‰¹é‡æå–è¡Œç¨‹ç /å¥åº·ç ä¿¡æ¯åˆ°è¡¨æ ¼</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>mufasa</a></span>&nbsp;<span class="post-category">æ”¶å½•äº <a href="/categories/%E9%A1%B9%E7%9B%AE/"><i class="far fa-folder fa-fw" aria-hidden="true"></i>é¡¹ç›®</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;<time datetime="2022-04-13">2022-04-13</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;çº¦ 1265 å­—&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;é¢„è®¡é˜…è¯» 3 åˆ†é’Ÿ&nbsp;</div>
        </div><div class="details toc" id="toc-static"  data-kept="">
                <div class="details-summary toc-title">
                    <span>ç›®å½•</span>
                    <span><i class="details-icon fas fa-angle-right" aria-hidden="true"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#1-è¯´æ˜">1. è¯´æ˜</a></li>
    <li><a href="#2-å®ç°æ€è·¯">2. å®ç°æ€è·¯</a></li>
    <li><a href="#3-å¥åº·ç å¤„ç†">3. å¥åº·ç å¤„ç†</a>
      <ul>
        <li><a href="#31-è¯»å–æ–‡ä»¶">3.1 è¯»å–æ–‡ä»¶</a></li>
        <li><a href="#32-äºŒç»´ç å¤„ç†">3.2 äºŒç»´ç å¤„ç†</a></li>
        <li><a href="#33-é¢œè‰²è¯†åˆ«">3.3 é¢œè‰²è¯†åˆ«</a></li>
      </ul>
    </li>
    <li><a href="#4-å¤„ç†è¡Œç¨‹ç ">4. å¤„ç†è¡Œç¨‹ç </a></li>
    <li><a href="#5-ç”Ÿæˆè¡¨æ ¼">5. ç”Ÿæˆè¡¨æ ¼</a></li>
    <li><a href="#6-æ‰“åŒ…">6. æ‰“åŒ…</a></li>
    <li><a href="#å‚è€ƒ">å‚è€ƒ</a></li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="1-è¯´æ˜">1. è¯´æ˜</h2>
<p>å­¦æ ¡è€å¸ˆå¸Œæœ›èƒ½å®ç°ä¸€ä¸ªè‡ªåŠ¨å¤„ç†è¡Œç¨‹ç ã€å¥åº·ç ä¿¡æ¯çš„ç¨‹åºï¼Œæœ¬æ–‡è®°å½•ä¸€ä¸‹å®ç°è¿‡ç¨‹ã€‚ç¬”è€…éè®¡ç®—æœºä¸“ä¸šäººå‘˜ï¼Œä»£ç çœ‹çœ‹å°±å¥½å“ˆ ğŸ˜¥ã€‚</p>
<h2 id="2-å®ç°æ€è·¯">2. å®ç°æ€è·¯</h2>
<p>ç¨‹åºæ‰§è¡Œé€»è¾‘ï¼š</p>
<ol>
<li>å­¦ç”Ÿçš„è¡Œç¨‹ç /å¥åº·ç æˆªå›¾ç”±ç®¡ç†äººå‘˜æ±‡æ€»ï¼Œå…¨éƒ¨ä¿å­˜åˆ°æ–‡ä»¶å¤¹ã€‚</li>
<li>éå†æ–‡ä»¶å¤¹ï¼Œé€šè¿‡æ–‡ä»¶ååˆ†åˆ«å¤„ç†è¡Œç¨‹ç å’Œå¥åº·ç ã€‚</li>
<li>å¯¹äºè¡Œç¨‹ç ï¼Œè°ƒç”¨ OCR API è·å–è¡Œç¨‹ç ä¿¡æ¯ï¼Œè·å–æœåŠ¡å™¨ json å­—ç¬¦ä¸²ï¼Œè§£æ json å¤„ç†ç»“æœã€‚</li>
<li>å¯¹äºå¥åº·ç ï¼Œä½¿ç”¨äºŒç»´ç ç›¸å…³çš„åŒ…å¾—åˆ°è½®å»“åæ ‡ï¼Œè®¡ç®—æˆªå–éƒ¨åˆ†çš„é¢œè‰²ã€‚</li>
<li>å°†ç»“æœå¯¹åº”ä¿å­˜åˆ°è¡¨æ ¼ä¸­ã€‚</li>
</ol>
<h2 id="3-å¥åº·ç å¤„ç†">3. å¥åº·ç å¤„ç†</h2>
<p>å¥åº·ç æœ¬èº«è§£æåæ˜¯ä¸€ä¸ªç½‘é¡µé“¾æ¥ï¼Œæ™®é€šäººå¹¶ä¸èƒ½è·å–æŒç äººä¸ªäººä¿¡æ¯ï¼Œåªèƒ½è€ƒè™‘ç›´æ¥è¯†åˆ«é¢œè‰²ã€‚</p>
<h3 id="31-è¯»å–æ–‡ä»¶">3.1 è¯»å–æ–‡ä»¶</h3>
<p>è€ƒè™‘åˆ°æ”¶ä¸Šæ¥çš„æˆªå›¾ä¼šä»¥ä¸­æ–‡æ¥å‘½åï¼Œä½†æ˜¯ opencv æ— æ³•ç›´æ¥è¯»å–ä¸­æ–‡æ–‡ä»¶åçš„å›¾ç‰‡ï¼Œéœ€è¦å€ŸåŠ© numpy æ¨¡å—ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">cv_imread</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">cv_img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imdecode</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">fromfile</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">),</span> <span class="n">cv2</span><span class="o">.</span><span class="n">IMREAD_COLOR</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">cv_img</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="32-äºŒç»´ç å¤„ç†">3.2 äºŒç»´ç å¤„ç†</h3>
<p>Python ä¸­ç”¨äºå¤„ç†äºŒç»´ç çš„åŒ…æœ‰ï¼špyzbarã€opencv-python å’Œ zxingã€‚åœ¨å®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œpyzbar æ— æ³•å¾ˆå¥½å¤„ç†é»„ç ï¼Œzxing è¡¨ç°è¾ƒå¥½ï¼Œä½†æ˜¯ zxing æœ¬èº«ç”± java å®ç°ï¼Œæœ€åä½¿ç”¨æ‰“åŒ…å·¥å…·ç”Ÿæˆçš„ exe æ— æ³•è¿è¡Œã€‚æœ€åé€‰æ‹©äº† opencv-python ä¸­çš„ QRCodeDetector æ¨¡å—ï¼Œå®ç°äº†è·å–äºŒç»´ç è½®å»“åæ ‡çš„åŠŸèƒ½ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">scan_qrcode</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">qrCodeDetector</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">QRCodeDetector</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">decodedText</span><span class="p">,</span> <span class="n">points</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">qrCodeDetector</span><span class="o">.</span><span class="n">detectAndDecode</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">decodedText</span><span class="p">,</span> <span class="n">points</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ‹¿åˆ° points åæ ‡åå¯ä»¥ç›´æ¥æˆªå–å‡ºæ¥è¿™ä¸ªéƒ¨åˆ†ç”¨äºä¸‹ä¸€æ­¥è¯†åˆ«é¢œè‰²ã€‚</p>
<h3 id="33-é¢œè‰²è¯†åˆ«">3.3 é¢œè‰²è¯†åˆ«</h3>
<p>å®šä¹‰ HSV é¢œè‰²èŒƒå›´</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># é¢œè‰²èŒƒå›´å®šä¹‰</span>
</span></span><span class="line"><span class="cl"><span class="n">color_dist</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;red&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Lower&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">60</span><span class="p">]),</span> <span class="s1">&#39;Upper&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">])},</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;blue&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Lower&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">100</span><span class="p">,</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">46</span><span class="p">]),</span> <span class="s1">&#39;Upper&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">124</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">])},</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;green&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Lower&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">35</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">35</span><span class="p">]),</span> <span class="s1">&#39;Upper&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">90</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">])},</span>
</span></span><span class="line"><span class="cl">    <span class="s1">&#39;yellow&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;Lower&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">26</span><span class="p">,</span> <span class="mi">43</span><span class="p">,</span> <span class="mi">46</span><span class="p">]),</span> <span class="s1">&#39;Upper&#39;</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="mi">34</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">])},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">detect_color</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">color</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">gs</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">GaussianBlur</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">5</span><span class="p">),</span> <span class="mi">0</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">hsv</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">gs</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2HSV</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">mask</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">inRange</span><span class="p">(</span><span class="n">hsv</span><span class="p">,</span> <span class="n">color_dist</span><span class="p">[</span><span class="n">color</span><span class="p">][</span><span class="s1">&#39;Lower&#39;</span><span class="p">],</span> <span class="n">color_dist</span><span class="p">[</span><span class="n">color</span><span class="p">][</span><span class="s1">&#39;Upper&#39;</span><span class="p">])</span>  
</span></span><span class="line"><span class="cl">    <span class="n">image_s</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> 
</span></span><span class="line"><span class="cl">    <span class="n">ratio</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">mask</span> <span class="o">//</span> <span class="mi">255</span><span class="p">))</span> <span class="o">/</span> <span class="n">image_s</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="n">ratio</span> <span class="o">&gt;</span> <span class="mf">0.02</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">False</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="4-å¤„ç†è¡Œç¨‹ç ">4. å¤„ç†è¡Œç¨‹ç </h2>
<p>ä»è¡Œç¨‹ç æˆªå›¾æå–å‡ºçš„ä¿¡æ¯å’Œå¥åº·ç ä¿¡æ¯å¹¶æ— é‡åˆï¼Œæ‰€ä»¥æ— æ³•é€šè¿‡å›¾ç‰‡ä¿¡æ¯è¿›è¡ŒåŒ¹é…ã€‚åªèƒ½ä¾èµ–ä¸Šä¼ æ—¶çš„å‘½åã€‚
è¿™é‡Œç›´æ¥ä½¿ç”¨ç™¾åº¦æ™ºèƒ½äº‘çš„ API è·å–è¡Œç¨‹ç ä¿¡æ¯ã€‚å…ˆæ³¨å†Œç™¾åº¦æ™ºèƒ½äº‘è´¦å·ï¼Œè·å– API Key å’Œ Secret Keyã€‚å°†è¡Œç¨‹ç ç”¨ base64 ç¼–ç åä¼ ç»™æœåŠ¡å™¨ï¼Œè§£æè·å–çš„ json å­—ç¬¦ä¸²ï¼Œæå–æ‰‹æœºå·ç  (ä¸å…¨)ã€é€”å¾„åœ°ã€é£é™©ç­‰çº§å’Œæ›´æ–°æ—¶é—´ã€‚</p>
<h2 id="5-ç”Ÿæˆè¡¨æ ¼">5. ç”Ÿæˆè¡¨æ ¼</h2>
<p>ä½¿ç”¨ xlwt æ¨¡å—ç”Ÿæˆè¡¨æ ¼ï¼Œç”¨å½“å¤©æ—¥æœŸå‘½åã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">datetime</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl">    <span class="n">xl</span> <span class="o">=</span> <span class="n">xlwt</span><span class="o">.</span><span class="n">Workbook</span><span class="p">(</span><span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">sheet</span> <span class="o">=</span> <span class="n">xl</span><span class="o">.</span><span class="n">add_sheet</span><span class="p">(</span><span class="s1">&#39;sheet1&#39;</span><span class="p">,</span> <span class="n">cell_overwrite_ok</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">sheet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;å§“å&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">sheet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;æ‰‹æœºå·ç &#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">sheet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;é€”å¾„åœ°&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">sheet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;é£é™©ç­‰çº§&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">sheet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;è¡Œç¨‹ç æ›´æ–°æ—¶é—´&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">sheet</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="s1">&#39;å¥åº·ç é¢œè‰²&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">excel_name</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;.xls&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="6-æ‰“åŒ…">6. æ‰“åŒ…</h2>
<p>å°† python ç¨‹åºæ‰“åŒ…æˆ exe æ–‡ä»¶ä¸€èˆ¬ä½¿ç”¨ pyinstaller åŒ…ï¼Œè®©ç¨‹åºèƒ½å¤Ÿåœ¨æ—  python ç¯å¢ƒçš„æœºå™¨ä¸Šä¹Ÿèƒ½è¿è¡Œã€‚å‡è®¾ç°åœ¨ä¸º main.py è¿›è¡Œæ‰“åŒ…ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pip3 install pyinstaller
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç„¶åè¿›å…¥é¡¹ç›®ç›®å½•ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">pyinstaller -F main.py
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>é”™è¯¯ 1</strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">The &#39;typing&#39; package is an obsolete backport of a standard library package and is incompatible with PyInstaller. Please `conda remove typing` then try again.
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç›´æ¥ <code>conda remove typing</code> ä¼šå¾ˆæ…¢å¹¶æœ‰å¯èƒ½ä¸æˆåŠŸã€‚å¯ä»¥è¿è¡Œ <code>pip uninstall typing</code>ã€‚</p>
<p><strong>é”™è¯¯ 2</strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">PermissionError: [Errno 13] Permission denied: xxx
</span></span></code></pre></td></tr></table>
</div>
</div><p>å°† main.py æ–‡ä»¶æ‰€åœ¨ç›®å½•çš„å±æ€§é€‰é¡¹ä¸­çš„ <code>åªè¯»</code> é€‰é¡¹å»æ‰ï¼Œç„¶åå†æ‰§è¡Œå‘½ä»¤ã€‚</p>
<p><strong>é”™è¯¯ 3</strong>:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-text" data-lang="text"><span class="line"><span class="cl">TypeError: _get_sysconfigdata_name() missing 1 required positional argument: &#39;check_exists&#39;
</span></span></code></pre></td></tr></table>
</div>
</div><p>å‚è€ƒæ–‡æœ«é“¾æ¥ 4 çš„è§£å†³æ–¹æ³•ã€‚</p>
<p>æœ€ååœ¨è·¯å¾„ä¸‹ç”Ÿæˆçš„æ–‡ä»¶å¤¹ä¸­æ‰¾åˆ° <code>dist</code> æ–‡ä»¶å¤¹ï¼Œå°†å…¶ä¸­çš„ <code>main.exe</code> æ–‡ä»¶ç§»åŠ¨åˆ°é¡¹ç›®ç›®å½•ä¸‹ï¼ŒåŒå‡»æ‰“å¼€å³å¯è¿è¡Œã€‚main.py æ–‡ä»¶ï¼Œdist ç­‰æ–‡ä»¶å¤¹éƒ½å¯ä»¥åˆ é™¤ã€‚</p>
<p>å¦‚éœ€è‡ªå®šä¹‰å›¾æ ‡å¹¶ä¸æ˜¾ç¤ºæ§åˆ¶å°ï¼Œä½¿ç”¨å‘½ä»¤ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl">Pyinstaller -F -w -i xx.ico main.py 
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<ol>
<li><a href="https://stackoverflow.com/questions/70710731/the-typing-package-is-an-obsolete-backport-of-a-standard-library-package-and-i" target="_blank" rel="noopener noreffer ">stackoverflow typing error</a></li>
<li><a href="https://blog.csdn.net/weixin_44630029/article/details/118021429" target="_blank" rel="noopener noreffer ">Python æŠ¥é”™ï¼šPermissionError: [Errno 13] Permission denied</a></li>
<li><a href="https://zhuanlan.zhihu.com/p/162237978" target="_blank" rel="noopener noreffer ">åˆ«å†é—®æˆ‘æ€ä¹ˆ Python æ‰“åŒ…æˆ exe äº†ï¼</a></li>
<li><a href="https://blog.csdn.net/weixin_44120025/article/details/122961857" target="_blank" rel="noopener noreffer ">ä½¿ç”¨ pyinstaller å°† py æ–‡ä»¶æ‰“åŒ…æˆ exe æ³¨æ„äº‹é¡¹åŠæŠ¥é”™</a></li>
</ol>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>æ›´æ–°äº 2022-04-13</span>
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/%E6%89%B9%E9%87%8F%E6%8F%90%E5%8F%96%E8%A1%8C%E7%A8%8B%E7%A0%81%E4%BF%A1%E6%81%AF%E5%88%B0%E8%A1%A8%E6%A0%BC/index.md" target="_blank">é˜…è¯»åŸå§‹æ–‡æ¡£</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="åˆ†äº«åˆ° å¾®åš" data-sharer="weibo" data-url="https://kali20177.github.io/%E6%89%B9%E9%87%8F%E6%8F%90%E5%8F%96%E8%A1%8C%E7%A8%8B%E7%A0%81%E4%BF%A1%E6%81%AF%E5%88%B0%E8%A1%A8%E6%A0%BC/" data-title="æ‰¹é‡æå–è¡Œç¨‹ç /å¥åº·ç ä¿¡æ¯åˆ°è¡¨æ ¼"><i class="fab fa-weibo fa-fw" aria-hidden="true"></i></a><a href="javascript:void(0);" title="åˆ†äº«åˆ° Evernote" data-sharer="evernote" data-url="https://kali20177.github.io/%E6%89%B9%E9%87%8F%E6%8F%90%E5%8F%96%E8%A1%8C%E7%A8%8B%E7%A0%81%E4%BF%A1%E6%81%AF%E5%88%B0%E8%A1%A8%E6%A0%BC/" data-title="æ‰¹é‡æå–è¡Œç¨‹ç /å¥åº·ç ä¿¡æ¯åˆ°è¡¨æ ¼"><i class="fab fa-evernote fa-fw" aria-hidden="true"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw" aria-hidden="true"></i>&nbsp;<a href="/tags/python/">Python</a>,&nbsp;<a href="/tags/%E9%A1%B9%E7%9B%AE/">é¡¹ç›®</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">è¿”å›</a></span>&nbsp;|&nbsp;<span><a href="/">ä¸»é¡µ</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/matplotlib-cpp-c-%E4%B8%AD%E4%BD%BF%E7%94%A8-python-%E7%BB%98%E5%9B%BE%E6%A8%A1%E5%9D%97%E7%9A%84%E6%96%B9%E6%B3%95/" class="prev" rel="prev" title="Matplotlib Cpp C&#43;&#43; ä¸­ä½¿ç”¨ Python ç»˜å›¾æ¨¡å—çš„æ–¹æ³•"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>Matplotlib Cpp C++ ä¸­ä½¿ç”¨ Python ç»˜å›¾æ¨¡å—çš„æ–¹æ³•</a>
            <a href="/r-%E8%AF%AD%E8%A8%80%E7%BB%98%E5%9B%BE/" class="next" rel="next" title="R è¯­è¨€ç»˜å›¾">R è¯­è¨€ç»˜å›¾<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2021 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">mufasa</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="å›åˆ°é¡¶éƒ¨">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="æŸ¥çœ‹è¯„è®º">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/twemoji/twemoji.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/contrib/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/contrib/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/contrib/mhchem.min.js"></script><script type="text/javascript" src="/lib/cookieconsent/cookieconsent.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"å¤åˆ¶åˆ°å‰ªè´´æ¿","maxShownLines":20},"comment":{},"cookieconsent":{"content":{"dismiss":"åŒæ„","link":"äº†è§£æ›´å¤š","message":"æœ¬ç½‘ç«™ä½¿ç”¨ Cookies æ¥æ”¹å–„æ‚¨çš„æµè§ˆä½“éªŒ."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":true,"left":"\\begin{equation}","right":"\\end{equation}"},{"display":true,"left":"\\begin{equation*}","right":"\\end{equation*}"},{"display":true,"left":"\\begin{align}","right":"\\end{align}"},{"display":true,"left":"\\begin{align*}","right":"\\end{align*}"},{"display":true,"left":"\\begin{alignat}","right":"\\end{alignat}"},{"display":true,"left":"\\begin{alignat*}","right":"\\end{alignat*}"},{"display":true,"left":"\\begin{gather}","right":"\\end{gather}"},{"display":true,"left":"\\begin{CD}","right":"\\end{CD}"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"æ²¡æœ‰æ‰¾åˆ°ç»“æœ","snippetLength":50,"type":"lunr"},"twemoji":true};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
